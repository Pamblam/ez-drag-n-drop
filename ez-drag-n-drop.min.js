/*! ez-drag-n-drop - v1.0.20 */
class EZDnD_Draggable{constructor(e){this.element=e.element,this.anchor=e.anchor||e.element,e.containers||(e.containers=e.element.parentElement),this.containers=Array.isArray(e.containers)?e.containers:[e.containers],this.placeholder=this.normalizePlaceholderInput(e.placeholder),this.dragging_class=e.dragging_class||void 0,this.hovering_class=e.hovering_class||void 0,this.validateClassParameters(),this.isDragging=!1,this.elementClone=!1,this.mouseOffset={x:0,y:0},this.cssDisplayValue=this.element.style.display||null,this.anchorCursor=this.anchor.style.cursor||null,this.bodyCursor=document.body.style.cursor||null,this.currentAbsPos={x:0,y:0},this.newElementPosition=null,this.boundOnAnchorMousedown=this.onAnchorMousedown.bind(this),this.boundOnMouseReleasethis=this.onMouseRelease.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.boundOnMouseOverAnchor=this.onMouseOverAnchor.bind(this),this.boundOnMouseOutAnchor=this.onMouseOutAnchor.bind(this),this.bind()}destroy(){this.unbind()}unbind(){this.anchor.removeEventListener("mousedown",this.boundOnAnchorMousedown),document.removeEventListener("mouseup",this.boundOnMouseReleasethis),document.removeEventListener("mousemove",this.boundOnMouseMove),this.anchor.removeEventListener("mouseover",this.boundOnMouseOverAnchor),this.anchor.removeEventListener("mouseout",this.boundOnMouseOutAnchor),this.onMouseRelease()}bind(){this.anchor.addEventListener("mousedown",this.boundOnAnchorMousedown),document.addEventListener("mouseup",this.boundOnMouseReleasethis),document.addEventListener("mousemove",this.boundOnMouseMove),this.anchor.addEventListener("mouseover",this.boundOnMouseOverAnchor),this.anchor.addEventListener("mouseout",this.boundOnMouseOutAnchor)}normalizePlaceholderInput(e){if(e instanceof HTMLElement)return e;if("string"==typeof e){var t=document.createElement("div");t.innerHTML=e;var n=[...t.children];return n.length?n[0]:null}return null}onMouseOverAnchor(){this.anchor.style.cursor="grab"}onMouseOutAnchor(){this.anchor.style.cursor=this.anchorCursor}validateClassParameters(){if(["element","anchor"].forEach(e=>{if(!(this[e]instanceof HTMLElement))throw new Error(e+" must be instance of HTMLElement")}),this.containers.forEach(e=>{if(!(e instanceof HTMLElement))throw new Error("containers must be instances of HTMLElement")}),!this.isInContainer(this.element))throw new Error("element must be contained within container.");if(!this.element.contains(this.anchor)&&this.element!==this.anchor)throw new Error("anchor must be contained within element.")}isInContainer(e){var t=!1;return this.containers.forEach(n=>{n.contains(e)&&(t=!0)}),t}onMouseRelease(){var e=!!this.isDragging,t=!!this.newElementPosition;if(this.isDragging=!1,this.elementClone&&this.elementClone.remove(),this.mouseOffset={x:0,y:0},this.currentAbsPos={x:0,y:0},this.newElementPosition&&(this.newElementPosition.ele.insertAdjacentElement(this.newElementPosition.pos,this.element),this.placeholder&&this.placeholder.remove(),this.hovering_class&&this.newElementPosition.container.classList.remove(this.hovering_class)),document.body.style.cursor=this.bodyCursor,this.anchor.style.cursor=this.anchorCursor,this.newElementPosition=null,this.element.style.display=this.cssDisplayValue,e)if(t){var n=new CustomEvent("dnd-completed",{detail:this,bubbles:!0});this.element.dispatchEvent(n)}else{n=new CustomEvent("dnd-canceled",{detail:this,bubbles:!0});this.element.dispatchEvent(n)}}onAnchorMousedown(e){e.preventDefault(),this.isDragging=!0,this.calculateMouseOffset(e),this.elementClone=this.cloneElement(),this.cssDisplayValue=this.element.style.display||null,this.element.style.display="none",document.body.style.cursor="grabbing";var t=new CustomEvent("dnd-started",{detail:this,bubbles:!0});this.element.dispatchEvent(t)}getNewElementPosition(e){var t=null,n=e.pageX,s=e.pageY;if(this.containers.forEach(e=>{var{top:o,left:i,right:r,bottom:l}=e.getBoundingClientRect();o+=scrollY,l+=scrollY,i+=scrollX,r+=scrollX,n>=i&&n<=r&&(s>=o&&s<=l)&&(t=e)}),!t)return null;var o,i,r,l=[...t.children];return l.length?(l.forEach(e=>{var t=null,l=this.calculateElementCenterPos(e),h=Math.hypot(l.x-n,l.y-s);t=s<l.y?"beforebegin":s>l.y?"afterend":n>l.x?"afterend":"beforebegin",(!r||h<r)&&(r=h,i=e,o=t)}),{pos:o,ele:i,container:t}):{pos:"afterbegin",ele:t,container:t}}calculateElementCenterPos(e){var{top:t,left:n,width:s,height:o}=e.getBoundingClientRect();return t+=scrollY,{x:(n+=scrollX)+s/2,y:t+o/2}}onMouseMove(e){if(!1!==this.isDragging){var t=new CustomEvent("dnd-dragging",{detail:this,bubbles:!0});this.element.dispatchEvent(t),this.currentAbsPos={x:e.pageX-this.mouseOffset.x,y:e.pageY-this.mouseOffset.y},this.elementClone.style.top=this.currentAbsPos.y+"px",this.elementClone.style.left=this.currentAbsPos.x+"px";var n=this.newElementPosition?this.newElementPosition.container:void 0;this.newElementPosition=this.getNewElementPosition(e),n&&(this.newElementPosition?this.newElementPosition.container!==n&&n.classList.remove(this.hovering_class):n.classList.remove(this.hovering_class)),this.newElementPosition&&this.hovering_class&&this.newElementPosition.container.classList.add(this.hovering_class),this.placeholder&&(this.newElementPosition?this.newElementPosition.ele.insertAdjacentElement(this.newElementPosition.pos,this.placeholder):this.placeholder.remove())}}calculateMouseOffset(e){var t=this.element.getBoundingClientRect(),n=e.pageX-(t.left+scrollX),s=e.pageY-(t.top+scrollY);this.mouseOffset={x:n,y:s}}cloneElement(){var e=this.deepCloneNode(this.element);console.log(e),document.body.append(e);var t=this.element.getBoundingClientRect();return this.currentAbsPos={x:t.left+scrollX,y:t.top+scrollY},e.style.position="absolute",e.style.top=this.currentAbsPos.y+"px",e.style.left=this.currentAbsPos.x+"px",this.dragging_class&&e.classList.add(this.dragging_class),e}deepCloneNode(e){if(!e instanceof HTMLElement)return!1;var t=document.createElement(e.tagName),n=getComputedStyle(e);for(let e=n.length;e--;){let s=n[e].split("-").map((e,t)=>(e=e.toLowerCase(),t>0&&(e=e.substr(0,1).toUpperCase()+e.substr(1)),e)).join(""),o=n[s];t.style[s]=o}var s=e.attributes;for(let e=s.length;e--;){let n=s[e].name,o=s[e].value;"id"!==n.toLowerCase()&&t.setAttribute(n,o)}var o=e.childNodes;for(let e=o.length;e--;){let n,s=o[e];1===s.nodeType?n=this.deepCloneNode(s):3===s.nodeType&&(n=document.createTextNode(s.textContent)),n&&t.prepend(n)}return e.value&&(t.value=e.value),t}}class EZDnD_Group{constructor(e){this.draggables=[];const t=e.container_selectors?[...document.querySelectorAll(e.container_selectors)]:void 0;var n=e.dragging_class||void 0,s=e.hovering_class||void 0;[...document.querySelectorAll(e.element_selectors)].forEach(o=>{const i=e.anchor_selectors?o.querySelector(e.anchor_selectors):void 0,r=e.placeholder||void 0;this.draggables.push(new EZDnD_Draggable({element:o,anchor:i,containers:t,placeholder:r,dragging_class:n,hovering_class:s}))})}destroy(){this.unbind()}unbind(){this.draggables.forEach(e=>e.unbind())}bind(){this.draggables.forEach(e=>e.bind())}}